@import 'tailwindcss';

:root {
  /* Base background + default foreground (light) */
  --background: #ffffff;
  --foreground: #171717;

  /* Font families */
  --font-sans: var(--font-noto-sans-jp), var(--font-geist-sans), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: var(--font-geist-mono), SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Zinc scale (structural) */
  --zinc-50: #fafafa;
  --zinc-100: #f4f4f5;
  --zinc-200: #e4e4e7;
  --zinc-300: #d4d4d8;
  --zinc-400: #a1a1aa;
  --zinc-500: #71717a;
  --zinc-600: #52525b;
  --zinc-700: #3f3f46;
  --zinc-800: #27272a;
  --zinc-900: #18181b;
  --zinc-950: #09090b;

  /* Semantic grayscale tokens (light) */
  --c-bg: var(--background);                 /* ページ背景 */
  --c-bg-subtle: #f9fafb;                    /* セクション背景 (gray-50近似) */
  --c-surface: #ffffff;                      /* カード/モーダル */
  --c-surface-alt: #f6f6f7;                  /* ネスト/ホバー */
  --c-border: #e5e7eb;                       /* gray-200 */
  --c-border-strong: #d4d4d8;                /* zinc-300 */
  --c-text: #111827;                         /* gray-900 */
  --c-text-secondary: #4b5563;               /* gray-600 */
  --c-text-muted: #6b7280;                   /* gray-500 */
  --c-text-disabled: #7d8693;                /* adjusted disabled (was gray-400) */
  /* Progress */
  --c-progress-track: #e5e7eb;               /* gray-200 */
  --c-progress-fill: #18181b;                /* zinc-900 */

  /* Interactive states */
  --c-hover-layer: rgba(17, 24, 39, 0.04);    /* 約 gray-900 4% */
  --c-active-layer: rgba(17, 24, 39, 0.08);

  /* Brand / accent colors */
  --color-blue-500: #3b82f6;
  --color-blue-600: #2563eb;
  --color-blue-400: #60a5fa;
  --color-blue-700: #1d4ed8;
  --color-emerald-500: #10b981;
  --color-emerald-600: #059669;
  --color-emerald-400: #34d399;
  --color-emerald-700: #047857;
  --color-red-500: #ef4444;
  --color-red-600: #dc2626;
  --color-red-400: #f87171;
  --color-red-700: #b91c1c;
  --color-amber-500: #f59e0b;
  --color-amber-600: #d97706;
  --color-amber-400: #fbbf24;
  --color-amber-700: #b45309;
  --color-cyan-400: #22d3ee;
  --color-cyan-500: #06b6d4;
  --color-cyan-600: #0891b2;
  --color-cyan-700: #0e7490;

  /* Gradient tokens (light) */
  /* Core accent gradients */
  --grad-accent: linear-gradient(135deg, var(--color-emerald-500), var(--color-blue-500));
  --grad-accent-strong: linear-gradient(135deg, var(--color-emerald-600), var(--color-blue-600));
  --grad-accent-alt: linear-gradient(90deg, var(--color-blue-600), var(--color-cyan-500));
  --grad-accent-soft: linear-gradient(135deg, #ecfdf5, #eff6ff); /* emerald-50 -> blue-50 */
  /* Semantic status gradients */
  --grad-success: linear-gradient(135deg, var(--color-emerald-400), var(--color-emerald-500));
  --grad-warning: linear-gradient(135deg, var(--color-amber-400), var(--color-amber-500));
  --grad-danger: linear-gradient(135deg, var(--color-red-400), var(--color-red-500));
  --grad-info: linear-gradient(135deg, var(--color-blue-400), var(--color-blue-500));
  /* Neutral / base */
  --grad-neutral: linear-gradient(135deg, var(--color-button-bg) 0%, color-mix(in srgb, var(--color-button-bg) 80%, black) 100%);

  /* Button semantic */
  --color-button-bg: #18181b;    /* zinc-900 */
  --color-button-text: #fafafa;  /* zinc-50 */

  /* Rings */
  --color-ring: #d4d4d8; /* zinc-300 */

  /* Legacy compatibility (to be removed) */
  --color-background: var(--c-bg);
  --color-foreground: var(--c-text);
  --color-primary: var(--color-button-bg);
  --color-primary-foreground: var(--color-button-text);
  --color-secondary: var(--c-text-secondary);
  --color-muted: var(--c-text-muted);
  --color-subtle: var(--c-text-disabled);
  --color-surface: var(--c-surface);
  --color-border-legacy: var(--c-border);
  --color-hover: var(--c-hover-layer);
  --color-active: var(--c-active-layer);

  /* Button motion + elevation tokens */
  --btn-hover-translate: -1px;
  --btn-active-translate: 0;
  --btn-hover-scale: 1.02;
  --btn-active-scale: 0.985;
  --btn-shadow-sm: 0 1px 2px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.02);
  --btn-shadow: 0 2px 4px -1px rgba(0,0,0,0.10),0 4px 12px -2px rgba(0,0,0,0.08);
  --btn-shadow-lg: 0 6px 18px -4px rgba(0,0,0,0.15),0 3px 8px -2px rgba(0,0,0,0.08);
}

/* ダークモード - data-theme属性に基づく */
[data-theme="dark"] {
  --background: var(--zinc-950);
  --foreground: var(--zinc-50);

  /* Dark semantic tokens */
  --c-bg: var(--background);
  --c-bg-subtle: var(--zinc-900);
  --c-surface: var(--zinc-900);
  --c-surface-alt: var(--zinc-800);
  --c-border: var(--zinc-800);
  --c-border-strong: var(--zinc-700);
  --c-text: var(--foreground);
  --c-text-secondary: var(--zinc-400);
  --c-text-muted: #8a8a92; /* elevated for AA */
  --c-text-disabled: #74747e; /* raised to ensure >=3:1 vs surface-alt */
  /* Gradient tokens (dark) */
  --grad-accent: linear-gradient(135deg, var(--color-emerald-600), var(--color-blue-600));
  --grad-accent-strong: linear-gradient(135deg, var(--color-emerald-700), var(--color-blue-700));
  --grad-accent-alt: linear-gradient(90deg, var(--color-blue-500), var(--color-cyan-400));
  --grad-accent-soft: linear-gradient(135deg, rgba(16,185,129,0.08), rgba(59,130,246,0.08));
  --grad-success: linear-gradient(135deg, var(--color-emerald-600), var(--color-emerald-700));
  --grad-warning: linear-gradient(135deg, var(--color-amber-600), var(--color-amber-700));
  --grad-danger: linear-gradient(135deg, var(--color-red-600), var(--color-red-700));
  --grad-info: linear-gradient(135deg, var(--color-blue-600), var(--color-blue-700));
  --grad-neutral: linear-gradient(135deg, var(--zinc-800) 0%, var(--zinc-900) 100%);
  /* Progress */
  --c-progress-track: var(--zinc-800);
  --c-progress-fill: var(--zinc-50);

  --color-button-bg: var(--zinc-50);
  --color-button-text: var(--zinc-900);

  --color-ring: var(--zinc-700);

  --c-hover-layer: rgba(250, 250, 250, 0.05); /* zinc-50 5% */
  --c-active-layer: rgba(250, 250, 250, 0.1);

  /* Overlay */
  --overlay-light: rgba(255, 255, 255, 0.06);
  --overlay-dark: rgba(0, 0, 0, 0.4);
}

/* 基本フォントスタイル */
body {
  background: var(--c-bg);
  color: var(--c-text);
  font-family: var(--font-sans);
  font-feature-settings: "palt" 1;  /* プロポーショナルな字間調整 */
  letter-spacing: 0.01em;  /* 全体的な字間を少し広げる */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Button styles */
.reveal-button,
.action-button {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-weight: 500;
  transition: all 0.22s cubic-bezier(.4,.2,.2,1);
  box-shadow: var(--btn-shadow-sm);
}

.reveal-button { background: var(--grad-neutral); color: var(--color-button-text); }

.reveal-button:hover { transform: translateY(var(--btn-hover-translate)) scale(var(--btn-hover-scale)); box-shadow: var(--btn-shadow); }
.reveal-button:active { transform: translateY(var(--btn-active-translate)) scale(var(--btn-active-scale)); box-shadow: var(--btn-shadow-sm); }

.action-button { background: var(--grad-info); color: #fff; font-weight: 500; }
.action-button:hover { filter: brightness(110%); transform: translateY(var(--btn-hover-translate)) scale(var(--btn-hover-scale)); box-shadow: var(--btn-shadow); }
.action-button:active { filter: brightness(100%); transform: translateY(var(--btn-active-translate)) scale(var(--btn-active-scale)); box-shadow: var(--btn-shadow-sm); }

[data-theme="dark"] .action-button { background: var(--grad-info); opacity: 0.92; }

[data-theme="dark"] .action-button:hover {
  opacity: 1;
}

/* Secondary (neutral) button */
.btn-secondary {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.625rem; /* 2.5 */
  padding: 0.875rem 1.25rem; /* py-3.5 px-5 */
  font-size: 0.875rem; /* text-sm */
  font-weight: 500;
  border: 1px solid var(--c-border);
  border-radius: 0.75rem; /* rounded-xl */
  background: color-mix(in srgb, var(--c-surface) 85%, transparent);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  color: var(--c-text-secondary);
  box-shadow: var(--btn-shadow-sm);
  transition: background-color .18s ease, border-color .18s ease, color .18s ease, box-shadow .18s ease, transform .18s ease;
}
.btn-secondary:hover { border-color: var(--c-border-strong); background: var(--c-surface-alt); color: var(--c-text); transform: translateY(var(--btn-hover-translate)) scale(var(--btn-hover-scale)); box-shadow: var(--btn-shadow); }
.btn-secondary:active { transform: translateY(var(--btn-active-translate)) scale(var(--btn-active-scale)); box-shadow: var(--btn-shadow-sm); }
.btn-secondary:focus-visible {
  outline: 2px solid var(--color-ring);
  outline-offset: 2px;
}
.btn-secondary .btn-overlay {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(135deg, var(--c-hover-layer), transparent 60%);
  opacity: 0;
  transition: opacity .25s ease;
  pointer-events: none;
}
.btn-secondary:hover .btn-overlay { opacity: 1; }
.btn-secondary:active .btn-overlay { opacity: 0.6; }


/* Form and card styles */
.task-card {
  background-color: var(--c-surface);
  border: 1px solid var(--c-border);
  color: var(--c-text);
  transition: all 0.2s ease;
}
.task-card:hover {
  border-color: var(--c-border-strong);
  background-color: var(--c-surface-alt);
}

[data-theme="dark"] .task-card {
  border-color: var(--c-border);
  background-color: var(--c-surface);
}
[data-theme="dark"] .task-card:hover {
  border-color: var(--c-border-strong);
  background-color: var(--c-surface-alt);
}

.task-input {
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  color: var(--c-text);
  transition: background-color 0.2s ease, border-color 0.2s ease;
}
.task-input:hover {
  border-color: var(--c-border-strong);
}
.task-input:focus-visible {
  outline: 2px solid var(--color-ring);
  outline-offset: 2px;
}

/* Unified form field */
.form-field {
  width: 100%;
  appearance: none;
  background: var(--c-surface);
  border: 1px solid var(--c-border);
  color: var(--c-text);
  padding: 0.55rem 0.75rem; /* ~px-3 py-2 */
  font-size: 0.9rem;
  line-height: 1.3;
  border-radius: 0.5rem; /* rounded-lg */
  transition: background-color .18s ease, border-color .18s ease, color .18s ease, box-shadow .18s ease;
}
.form-field:hover {
  border-color: var(--c-border-strong);
}
.form-field:focus-visible {
  outline: 2px solid var(--color-ring);
  outline-offset: 2px;
  border-color: var(--color-ring);
}
.form-field::placeholder {
  color: var(--c-text-muted);
  opacity: 1;
}
.form-field:disabled,
.form-field[aria-disabled="true"] {
  background: var(--c-surface-alt);
  color: var(--c-text-disabled);
  cursor: not-allowed;
}
.form-field[aria-invalid="true"] {
  border-color: var(--color-red-500);
}
.form-field[aria-invalid="true"]:focus-visible {
  outline-color: var(--color-red-500);
}

/* 見出しのスタイル */
h1, h2, h3, h4, h5, h6 {
  font-feature-settings: "palt" 1;
  letter-spacing: -0.02em;  /* 見出しの字間を少し詰める */
  line-height: 1.3;
}

/* 英数字のスタイル */
.font-numeric {
  font-family: var(--font-geist-sans), var(--font-sans);
  font-feature-settings: "tnum" 1;  /* 等幅数字 */
}
